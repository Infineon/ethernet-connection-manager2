<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ethernet Connection Manager Library: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ethernet Connection Manager Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >ECM is a library which helps application developers to manage Ethernet Connectivity. The library provides a set of APIs that can be used to establish and monitor ethernet connections on Infineon platforms that support ethernet connectivity. The library APIs are thread-safe. The library monitors the ethernet connection and can notifies connection state changes through an event notification mechanism.</p>
<h1><a class="anchor" id="section_features"></a>
Features and Functionality</h1>
<p >The current implementation has the following features and functionality:</p><ul>
<li>Supports reduced gigabit media-independent interface (RGMII) mode.</li>
<li>Supports upto 4 source and destination address filtering.</li>
<li>Supports for enabling and disabling of receiving the broadcast messages.</li>
<li>Supports for enable/disable of promiscous mode.</li>
<li>Exposes ethernet APIs to configure, connect and disconnect from the network.</li>
<li>Connection monitoring: Monitors active connections and link events. Notifies the connection state change through event notification registration mechanism.</li>
<li>This library is part of ModusToolBox framework that supports connectivity applications based on FreeRTOS, lwIP, and mbed TLS.</li>
<li>The library is built on top of the abstraction-rtos library that provides the RTOS abstraction API for FreeRTOS.</li>
</ul>
<h1><a class="anchor" id="section_supported_platforms"></a>
Supported Platforms</h1>
<p >This library and its features are supported on the following Infineon platforms:</p><ul>
<li><a href="https://www.infineon.com/KIT_XMC72_EVK">XMC7200D-E272K8384 kit (KIT-XMC72-EVK)</a></li>
</ul>
<h1><a class="anchor" id="section_dependencies"></a>
Dependent Libraries</h1>
<ul>
<li><a href="https://github.com/Infineon/lwip-network-interface-integration">lwip network interface integration Core</a></li>
<li><a href="https://github.com/Infineon/freertos">Freertos</a></li>
<li><a href="https://github.com/Infineon/lwip-freertos-integration">lwip freertos integration</a></li>
</ul>
<h1><a class="anchor" id="section_integration"></a>
Quick Start</h1>
<p >The ECM library disables all the debug log messages by default. To enable log messages, the application must perform the following:</p><ol type="1">
<li>Add the <code>ENABLE_ECM_LOGS</code> macro to the <em>DEFINES</em> in the code example's Makefile. The Makefile entry would look like as follows: <div class="fragment"><div class="line">DEFINES+=ENABLE_ECM_LOGS</div>
</div><!-- fragment --></li>
<li>Call the <code>cy_log_init()</code> function provided by the <em>cy-log</em> module. cy-log is part of the <em>connectivity-utilities</em> library. See *<a href="* https://Infineon.github.io/connectivity-utilities/api_reference_manual/html/group__logging__utils.html">connectivity-utilities library API documentation</a>. Add the CYBSP_ETHERNET_CAPABLE build configuration to enable the ethernet functionality. The Makefile entry should look like as follows: <div class="fragment"><div class="line">DEFINES+=CYBSP_ETHERNET_CAPABLE</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="section_code_snippet"></a>
Code Snippets</h1>
<h2><a class="anchor" id="snip1"></a>
Snippet 1: Init</h2>
<p >This code snippet demonstrates the initialization ethernet driver, network stack and configuration structures required for creating an ECM client handle and and usage of the <a class="el" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5" title="Initializes the Ethernet physical driver, enables Ethernet port, and brings up the network stack.">cy_ecm_ethif_init()</a> API function.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><a class="code hl_typedef" href="group__group__ecm__typedefs.html#ga0bee3cc16897346fc3def995951dd645">cy_ecm_t</a> ecm_handle;</div>
<div class="line"><a class="code hl_struct" href="structcy__ecm__phy__config__t.html">cy_ecm_phy_config_t</a> ecm_phy_config = {</div>
<div class="line">        .<a class="code hl_variable" href="structcy__ecm__phy__config__t.html#a2d047a9c096e0be21f4d9e30ecc2a36b">interface_speed_type</a> = <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga4996f7bf858da646175429895490d072ae45c9f45e02b675afb8b9666598f4f18">CY_ECM_SPEED_TYPE_RGMII</a>,</div>
<div class="line">        .mode = <a class="code hl_enumvalue" href="group__group__ecm__enums.html#ggac17257bdd17fce7824f300e91fe0410ca29d9ea7089290c1b72843652984387ba">CY_ECM_DUPLEX_FULL</a>,</div>
<div class="line">        .phy_speed = <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga966f70273a22557a089e1287837d6e93ae432fa73ef0d3e188efb2a9bec5c3192">CY_ECM_PHY_SPEED_1000M</a></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_ethernet_init( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM Library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__enums_html_gga4996f7bf858da646175429895490d072ae45c9f45e02b675afb8b9666598f4f18"><div class="ttname"><a href="group__group__ecm__enums.html#gga4996f7bf858da646175429895490d072ae45c9f45e02b675afb8b9666598f4f18">CY_ECM_SPEED_TYPE_RGMII</a></div><div class="ttdeci">@ CY_ECM_SPEED_TYPE_RGMII</div><div class="ttdoc">Reduced Gigabit Media-Independent Interface (RGMII)</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:92</div></div>
<div class="ttc" id="agroup__group__ecm__enums_html_gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6"><div class="ttname"><a href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a></div><div class="ttdeci">@ CY_ECM_INTERFACE_ETH0</div><div class="ttdoc">Interface for Ethernet port 0.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:47</div></div>
<div class="ttc" id="agroup__group__ecm__enums_html_gga966f70273a22557a089e1287837d6e93ae432fa73ef0d3e188efb2a9bec5c3192"><div class="ttname"><a href="group__group__ecm__enums.html#gga966f70273a22557a089e1287837d6e93ae432fa73ef0d3e188efb2a9bec5c3192">CY_ECM_PHY_SPEED_1000M</a></div><div class="ttdeci">@ CY_ECM_PHY_SPEED_1000M</div><div class="ttdoc">1000 Mbps</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:83</div></div>
<div class="ttc" id="agroup__group__ecm__enums_html_ggac17257bdd17fce7824f300e91fe0410ca29d9ea7089290c1b72843652984387ba"><div class="ttname"><a href="group__group__ecm__enums.html#ggac17257bdd17fce7824f300e91fe0410ca29d9ea7089290c1b72843652984387ba">CY_ECM_DUPLEX_FULL</a></div><div class="ttdeci">@ CY_ECM_DUPLEX_FULL</div><div class="ttdoc">Full duplex.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:74</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga09e918eb95302d29400e7a359a83e4b5"><div class="ttname"><a href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a></div><div class="ttdeci">cy_rslt_t cy_ecm_ethif_init(cy_ecm_interface_t eth_idx, cy_ecm_mac_t *mac_addr, cy_ecm_phy_config_t *ecm_phy_config, cy_ecm_t *ecm_handle)</div><div class="ttdoc">Initializes the Ethernet physical driver, enables Ethernet port, and brings up the network stack.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga9bb2ae7395196acd5304c5ad00038a6a"><div class="ttname"><a href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a></div><div class="ttdeci">cy_rslt_t cy_ecm_init(void)</div><div class="ttdoc">Does general allocation and initialization of resources needed for the library.</div></div>
<div class="ttc" id="agroup__group__ecm__typedefs_html_ga0bee3cc16897346fc3def995951dd645"><div class="ttname"><a href="group__group__ecm__typedefs.html#ga0bee3cc16897346fc3def995951dd645">cy_ecm_t</a></div><div class="ttdeci">void * cy_ecm_t</div><div class="ttdoc">Ethernet Connection Manager handle.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:125</div></div>
<div class="ttc" id="astructcy__ecm__phy__config__t_html"><div class="ttname"><a href="structcy__ecm__phy__config__t.html">cy_ecm_phy_config_t</a></div><div class="ttdoc">Structure containing the configuration parameters to configure Ethernet PHY and MAC for data transfer...</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:167</div></div>
<div class="ttc" id="astructcy__ecm__phy__config__t_html_a2d047a9c096e0be21f4d9e30ecc2a36b"><div class="ttname"><a href="structcy__ecm__phy__config__t.html#a2d047a9c096e0be21f4d9e30ecc2a36b">cy_ecm_phy_config_t::interface_speed_type</a></div><div class="ttdeci">cy_ecm_speed_type_t interface_speed_type</div><div class="ttdoc">Standard interface to be used for data transfer</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:168</div></div>
</div><!-- fragment --><h2><a class="anchor" id="snip2"></a>
Snippet 2: Configure</h2>
<p >This code snippet demonstrates how to configure the ethernet features like setting promiscuous mode, broadcast packet disabling, address filtering and and usage of the <a class="el" href="group__group__ecm__functions.html#ga13c35a4e6c210679a2dbeb5dee73884a" title="Enable or Disable the promiscuous mode.">cy_ecm_set_promiscuous_mode()</a>, cy_ecm_set_broadcast_disable() and <a class="el" href="group__group__ecm__functions.html#ga807f76585391a681916a8dc81a4dcda4" title="Filter the receiving packets with the configured source or destination filter address.">cy_ecm_set_filter_address()</a> API functions.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_ethernet_features_enable( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line">    <span class="keywordtype">bool</span> is_promiscuous_mode = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> is_broadcast_disable = <span class="keyword">true</span>;</div>
<div class="line">    uint8_t filter_address_count;</div>
<div class="line">    <a class="code hl_struct" href="structcy__ecm__filter__address__t.html">cy_ecm_filter_address_t</a> filter_address;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM Library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with the provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure the Ethernet driver to enable promiscuous mode */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga13c35a4e6c210679a2dbeb5dee73884a">cy_ecm_set_promiscuous_mode</a>( ecm_handle, is_promiscuous_mode );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure the Ethernet driver to enable broadcast frames to be received */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#gaa1cd96de76219fb84660834f9e57a8bc">cy_ecm_broadcast_disable</a>( ecm_handle, is_broadcast_disable );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure the Ethernet driver to disable all the incoming broadcast messages */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#gaa1cd96de76219fb84660834f9e57a8bc">cy_ecm_broadcast_disable</a>( ecm_handle, is_broadcast_disable );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    filter_address_count = 1;</div>
<div class="line">    filter_address.<a class="code hl_variable" href="structcy__ecm__filter__address__t.html#aa99b2552a01757b8e882c12a97c2c282">filter_type</a> = <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga3023c63e59bf47b91067fdb52dab874ca2efd0890a952c2636c4c49771eae0ad5">CY_ECM_FILTER_TYPE_SOURCE</a>;</div>
<div class="line">    memset( &amp;( filter_address.<a class="code hl_variable" href="structcy__ecm__filter__address__t.html#a4ca9a6d86b33c25e13f979565640970e">filter_addr</a>[0] ), 0xFF, <a class="code hl_define" href="group__group__ecm__macros.html#ga43ff877491f0929ab58e1aac5386337a">CY_ECM_MAC_ADDR_LEN</a> );</div>
<div class="line">    filter_address.<a class="code hl_variable" href="structcy__ecm__filter__address__t.html#a7809135ec14d1f44ee2abbd6169e6521">ignoreBytes</a> = 0x00;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure the Ethernet driver to enable promiscuous mode */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga807f76585391a681916a8dc81a4dcda4">cy_ecm_set_filter_address</a>( ecm_handle, &amp;filter_address, filter_address_count );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__enums_html_gga3023c63e59bf47b91067fdb52dab874ca2efd0890a952c2636c4c49771eae0ad5"><div class="ttname"><a href="group__group__ecm__enums.html#gga3023c63e59bf47b91067fdb52dab874ca2efd0890a952c2636c4c49771eae0ad5">CY_ECM_FILTER_TYPE_SOURCE</a></div><div class="ttdeci">@ CY_ECM_FILTER_TYPE_SOURCE</div><div class="ttdoc">filter on the source address</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:100</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga13c35a4e6c210679a2dbeb5dee73884a"><div class="ttname"><a href="group__group__ecm__functions.html#ga13c35a4e6c210679a2dbeb5dee73884a">cy_ecm_set_promiscuous_mode</a></div><div class="ttdeci">cy_rslt_t cy_ecm_set_promiscuous_mode(cy_ecm_t ecm_handle, bool is_promiscuous_mode)</div><div class="ttdoc">Enable or Disable the promiscuous mode.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga807f76585391a681916a8dc81a4dcda4"><div class="ttname"><a href="group__group__ecm__functions.html#ga807f76585391a681916a8dc81a4dcda4">cy_ecm_set_filter_address</a></div><div class="ttdeci">cy_rslt_t cy_ecm_set_filter_address(cy_ecm_t ecm_handle, cy_ecm_filter_address_t *filter_address, uint8_t filter_address_count)</div><div class="ttdoc">Filter the receiving packets with the configured source or destination filter address.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_gaa1cd96de76219fb84660834f9e57a8bc"><div class="ttname"><a href="group__group__ecm__functions.html#gaa1cd96de76219fb84660834f9e57a8bc">cy_ecm_broadcast_disable</a></div><div class="ttdeci">cy_rslt_t cy_ecm_broadcast_disable(cy_ecm_t ecm_handle, bool is_broadcast_disable)</div><div class="ttdoc">Enable or Disable the incoming broadcast packets.</div></div>
<div class="ttc" id="agroup__group__ecm__macros_html_ga43ff877491f0929ab58e1aac5386337a"><div class="ttname"><a href="group__group__ecm__macros.html#ga43ff877491f0929ab58e1aac5386337a">CY_ECM_MAC_ADDR_LEN</a></div><div class="ttdeci">#define CY_ECM_MAC_ADDR_LEN</div><div class="ttdoc">MAC address length</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:29</div></div>
<div class="ttc" id="astructcy__ecm__filter__address__t_html"><div class="ttname"><a href="structcy__ecm__filter__address__t.html">cy_ecm_filter_address_t</a></div><div class="ttdoc">Structure containing the configuration parameters to configure Ethernet PHY and MAC to filter the add...</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:177</div></div>
<div class="ttc" id="astructcy__ecm__filter__address__t_html_a4ca9a6d86b33c25e13f979565640970e"><div class="ttname"><a href="structcy__ecm__filter__address__t.html#a4ca9a6d86b33c25e13f979565640970e">cy_ecm_filter_address_t::filter_addr</a></div><div class="ttdeci">uint8_t filter_addr[CY_ECM_MAC_ADDR_LEN]</div><div class="ttdoc">Address to be filtered.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:179</div></div>
<div class="ttc" id="astructcy__ecm__filter__address__t_html_a7809135ec14d1f44ee2abbd6169e6521"><div class="ttname"><a href="structcy__ecm__filter__address__t.html#a7809135ec14d1f44ee2abbd6169e6521">cy_ecm_filter_address_t::ignoreBytes</a></div><div class="ttdeci">uint8_t ignoreBytes</div><div class="ttdoc">For example, ignoreBytes = 0x01 implies that the first byte received should not be compared.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:180</div></div>
<div class="ttc" id="astructcy__ecm__filter__address__t_html_aa99b2552a01757b8e882c12a97c2c282"><div class="ttname"><a href="structcy__ecm__filter__address__t.html#aa99b2552a01757b8e882c12a97c2c282">cy_ecm_filter_address_t::filter_type</a></div><div class="ttdeci">cy_ecm_filter_type_t filter_type</div><div class="ttdoc">Type of address to be filtered.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:178</div></div>
</div><!-- fragment --><h2><a class="anchor" id="snip3"></a>
Snippet 3: Connect</h2>
<p >This code snippet demonstrates how to establish a connection to the ethernet and bring network up using the <a class="el" href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d" title="Brings up the interface and configure to corresponding Ethernet port.">cy_ecm_connect()</a> API function.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcy__ecm__ip__address__t.html">cy_ecm_ip_address_t</a> ip_addr;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_connect( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with the provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Connect to the Ethernet interface and bring up the network */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d">cy_ecm_connect</a>( ecm_handle, NULL, &amp;ip_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga47943ffea422b5e0581505e20f4f226d"><div class="ttname"><a href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d">cy_ecm_connect</a></div><div class="ttdeci">cy_rslt_t cy_ecm_connect(cy_ecm_t ecm_handle, cy_ecm_ip_setting_t *static_ip_addr, cy_ecm_ip_address_t *ip_addr)</div><div class="ttdoc">Brings up the interface and configure to corresponding Ethernet port.</div></div>
<div class="ttc" id="astructcy__ecm__ip__address__t_html"><div class="ttname"><a href="structcy__ecm__ip__address__t.html">cy_ecm_ip_address_t</a></div><div class="ttdoc">Structure used to set or receive the IP address information to or from the underlying network stack.</div><div class="ttdef"><b>Definition:</b> cy_ecm.h:144</div></div>
</div><!-- fragment --><h2><a class="anchor" id="snip4"></a>
Snippet 4: Get IP address</h2>
<p >This code snippet demonstrates how to establish a connection to the ethernet and get IP address using the <a class="el" href="group__group__ecm__functions.html#ga0d24d3738cf80a768df1a28208e2b2b8" title="Retrieves the IPv4 address of the given interface.">cy_ecm_get_ip_address()</a> API function.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcy__ecm__ip__address__t.html">cy_ecm_ip_address_t</a> gateway_addr, net_mask_addr;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_get_ip_address( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with the provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Connect to the Ethernet interface and bring up the network */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d">cy_ecm_connect</a>( ecm_handle, NULL, &amp;ip_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*. Return the interface IP address */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga0d24d3738cf80a768df1a28208e2b2b8">cy_ecm_get_ip_address</a>( ecm_handle, &amp;ip_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*. Return gateway IP address */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#gab186910076eed55b434bf8b258c68dec">cy_ecm_get_gateway_address</a>( ecm_handle, &amp;gateway_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*. Return the netmask IP address */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga89e06cd9f67fbbbee8c93e6bebff47af">cy_ecm_get_netmask_address</a>( ecm_handle, &amp;net_mask_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga0d24d3738cf80a768df1a28208e2b2b8"><div class="ttname"><a href="group__group__ecm__functions.html#ga0d24d3738cf80a768df1a28208e2b2b8">cy_ecm_get_ip_address</a></div><div class="ttdeci">cy_rslt_t cy_ecm_get_ip_address(cy_ecm_t ecm_handle, cy_ecm_ip_address_t *ip_addr)</div><div class="ttdoc">Retrieves the IPv4 address of the given interface.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga89e06cd9f67fbbbee8c93e6bebff47af"><div class="ttname"><a href="group__group__ecm__functions.html#ga89e06cd9f67fbbbee8c93e6bebff47af">cy_ecm_get_netmask_address</a></div><div class="ttdeci">cy_rslt_t cy_ecm_get_netmask_address(cy_ecm_t ecm_handle, cy_ecm_ip_address_t *net_mask_addr)</div><div class="ttdoc">Retrieves the subnet mask address of the given interface.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_gab186910076eed55b434bf8b258c68dec"><div class="ttname"><a href="group__group__ecm__functions.html#gab186910076eed55b434bf8b258c68dec">cy_ecm_get_gateway_address</a></div><div class="ttdeci">cy_rslt_t cy_ecm_get_gateway_address(cy_ecm_t ecm_handle, cy_ecm_ip_address_t *gateway_addr)</div><div class="ttdoc">Retrieves the gateway IP address of the given interface.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="snip5"></a>
Snippet 5: ping</h2>
<p >This code snippet demonstrates how to establish a connection to the ethernet and ping using the <a class="el" href="group__group__ecm__functions.html#ga8909c74ee50f7f49e0502a33c11581d2" title="Sends a ping request to the given IP address.">cy_ecm_ping()</a> API function.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_ping( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    uint32_t elapsed_time_ms;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with the provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Connect to the Ethernet interface and bring up the network */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d">cy_ecm_connect</a>( ecm_handle, NULL, &amp;ip_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*. Return gateway IP address */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#gab186910076eed55b434bf8b258c68dec">cy_ecm_get_gateway_address</a>( ecm_handle, &amp;gateway_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*. Return the gateway MAC address */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga8909c74ee50f7f49e0502a33c11581d2">cy_ecm_ping</a>( ecm_handle, &amp;gateway_addr, 3000, &amp;elapsed_time_ms );</div>
<div class="line">    (void)elapsed_time_ms;</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__functions_html_ga8909c74ee50f7f49e0502a33c11581d2"><div class="ttname"><a href="group__group__ecm__functions.html#ga8909c74ee50f7f49e0502a33c11581d2">cy_ecm_ping</a></div><div class="ttdeci">cy_rslt_t cy_ecm_ping(cy_ecm_t ecm_handle, cy_ecm_ip_address_t *ip_addr, uint32_t timeout_ms, uint32_t *elapsed_ms)</div><div class="ttdoc">Sends a ping request to the given IP address.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="snip6"></a>
Snippet 6: Deinit</h2>
<p >This code snippet demonstrates how to disconnect, bring the network down and deinit the ECM ping using the <a class="el" href="group__group__ecm__functions.html#gae0769bf40b9eb139d70573644160dca1" title="Releases the resources allocated in the cy_ecm_init function.">cy_ecm_deinit()</a> API function.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> snippet_ecm_deinit( <span class="keywordtype">void</span> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Status variables for various operations */</span></div>
<div class="line">    cy_rslt_t result = CY_RSLT_SUCCESS;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the ECM library and network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#ga9bb2ae7395196acd5304c5ad00038a6a">cy_ecm_init</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the Ethernet driver with the provided configurations */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga09e918eb95302d29400e7a359a83e4b5">cy_ecm_ethif_init</a>( <a class="code hl_enumvalue" href="group__group__ecm__enums.html#gga590222ddd53f937ee092b018d402bd49abfaf0912e18c99d162fb23ebaddfcfa6">CY_ECM_INTERFACE_ETH0</a>, NULL, &amp;ecm_phy_config, &amp;ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Connect to the Ethernet interface and bring up the network */</span></div>
<div class="line">    result =  <a class="code hl_function" href="group__group__ecm__functions.html#ga47943ffea422b5e0581505e20f4f226d">cy_ecm_connect</a>( ecm_handle, NULL, &amp;ip_addr );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Bring down the network stack */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#gacdc9135c536dc83d8f0a5af3fb563831">cy_ecm_disconnect</a>( ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Deinitialize ecm_handle */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#gaec7c87dc3f6a6b035f7902961480d7f9">cy_ecm_ethif_deinit</a>( ecm_handle );</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Deinitialize the ECM library */</span></div>
<div class="line">    result = <a class="code hl_function" href="group__group__ecm__functions.html#gae0769bf40b9eb139d70573644160dca1">cy_ecm_deinit</a>();</div>
<div class="line">    <span class="keywordflow">if</span>( result != CY_RSLT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Failure path */</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__group__ecm__functions_html_gacdc9135c536dc83d8f0a5af3fb563831"><div class="ttname"><a href="group__group__ecm__functions.html#gacdc9135c536dc83d8f0a5af3fb563831">cy_ecm_disconnect</a></div><div class="ttdeci">cy_rslt_t cy_ecm_disconnect(cy_ecm_t ecm_handle)</div><div class="ttdoc">Brings down the interface.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_gae0769bf40b9eb139d70573644160dca1"><div class="ttname"><a href="group__group__ecm__functions.html#gae0769bf40b9eb139d70573644160dca1">cy_ecm_deinit</a></div><div class="ttdeci">cy_rslt_t cy_ecm_deinit(void)</div><div class="ttdoc">Releases the resources allocated in the cy_ecm_init function.</div></div>
<div class="ttc" id="agroup__group__ecm__functions_html_gaec7c87dc3f6a6b035f7902961480d7f9"><div class="ttname"><a href="group__group__ecm__functions.html#gaec7c87dc3f6a6b035f7902961480d7f9">cy_ecm_ethif_deinit</a></div><div class="ttdeci">cy_rslt_t cy_ecm_ethif_deinit(cy_ecm_t *ecm_handle)</div><div class="ttdoc">Deinitializes the Ethernet physical driver.</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Ethernet Connection Manager Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
</body>
</html>
